<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM.js Speed tests</title>
    <script src="speed/lib/benchmark-1.0.0/benchmark.js"></script>
    <script src="speed/lib/jquery-1.9.1/jquery.js"></script>
    <script src="../src/DOM.js"></script>
</head>
<body>
    <a href="#" id="test1" data-test="t1"></a>
    <a href="#" id="test2" data-test="t2"></a>
    <a href="#" id="test3" data-test="t3"></a>
    <div id="sandbox"></div>
    <script type="text/javascript">

    console.log("------------------------------get------------------------------");

    (function() {
        var nativeLink = document.getElementById("test1"),
            jqueryLink = $("#test2"),
            domLink = DOM.find("#test3");

        new Benchmark.Suite()
        // add tests
        .add("jquery#attr", function() {
            jqueryLink.attr("id");
        })
        .add("jquery#prop", function() {
            jqueryLink.prop("id");
        })
        .add("DOM#get", function() {
            domLink.get("id"); 
        })
        .add("native#get", function() {
            nativeLink.id;
        })
        // add listeners
        .on('cycle', function(event) {
          console.log(String(event.target));
        })
        // run sync
        .run();
    })();

    console.log("------------------------------set------------------------------");

    (function() {
        var nativeLink = document.getElementById("test1"),
            jqueryLink = $("#test2"),
            domLink = DOM.find("#test3");

        new Benchmark.Suite()
        // add tests
        .add("jquery#attr", function() {
            jqueryLink.attr("id", new Date().toString());
        })
        .add("jquery#prop", function() {
            jqueryLink.prop("id", new Date().toString());
        })
        .add("DOM#set", function() {
            domLink.set("id", new Date().toString()); 
        })
        .add("native set", function() {
            nativeLink.id = new Date().toString();
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));
        })
        // run sync
        .run();
    })();

    console.log("-------------------------addClass------------------------------");

    (function() {
        var nativeSandbox = document.getElementById("sandbox"),
            jquerySandbox = $("#sandbox"),
            domSandbox = DOM.find("#sandbox");

        new Benchmark.Suite()
        // add tests
        .add("jquery#addClass", function() {
            jquerySandbox.addClass("t" + new Date().getTime());
        })
        .add("DOM#addClass", function() {
            domSandbox.addClass("t" + new Date().getTime()); 
        })
        .add("native", function() {
            nativeSandbox.classList.add("t" + new Date().getTime());
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));

            nativeSandbox.className = "";
        })
        // run sync
        .run();
    })();

    console.log("----------------------toggleClass------------------------------");

    (function() {
        var nativeSandbox = document.getElementById("sandbox"),
            jquerySandbox = $("#sandbox"),
            domSandbox = DOM.find("#sandbox"),
            className = "t" + new Date().getTime();

        new Benchmark.Suite()
        // add tests
        .add("jquery#toggleClass", function() {
            jquerySandbox.toggleClass(className);
        })
        .add("DOM#toggleClass", function() {
            domSandbox.toggleClass(className); 
        })
        .add("native", function() {
            nativeSandbox.classList.toggle(className);
        })
        // add listeners
        .on('cycle', function(event) {
          console.log(String(event.target));
        })
        // run sync
        .run();
    })();

    console.log("-----------------------------find------------------------------");

    (function() {
        new Benchmark.Suite()
        // add tests
        .add("jquery#selector", function() {
            $("a");
        })
        .add("DOM#findAll", function() {
            DOM.findAll("a");
        })
        .add("DOM#find", function() {
            DOM.find("a");
        })
        .add("native", function() {
            document.getElementsByTagName("a")[0];
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));
        })
        // run sync
        .run();
    })();

    console.log("---------------------------create------------------------------");

    (function() {
        new Benchmark.Suite()
        // add tests
        .add("jquery#create(String)", function() {
            $("<a>");
        })
        .add("jquery#create(Element)", function() {
            $(document.createElement("a"));
        })
        .add("jquery#create(String...)", function() {
            $("<div><a></a></div><b></b>");
        })
        .add("DOM#create(String)", function() {
            DOM.create("a");
        })
        .add("DOM#create(Element)", function() {
            DOM.create(document.createElement("a"));
        })
        .add("DOM#create(String...)", function() {
            DOM.create("<div><a></a></div><b></b>");
        })
        .add("native", function() {
            document.createElement("a");
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));
        })
        // run sync
        .run();
    })();

    console.log("---------------------------append------------------------------");

    (function() {
        var nativeSandbox = document.getElementById("sandbox"),
            jquerySandbox = $("#sandbox"),
            domSandbox = DOM.find("#sandbox");

        new Benchmark.Suite()
        // add tests
        .add("jquery#append(String)", function() {
            jquerySandbox.append("<span>");
        })
        .add("jquery#append(Element)", function() {
            jquerySandbox.append(document.createElement("span"));
        })
        .add("DOM#append(String)", function() {
            domSandbox.append("<span>"); 
        })
        .add("DOM#append(Element)", function() {
            domSandbox.append(document.createElement("span")); 
        })
        .add("native#appendChild(Element)", function() {
            nativeSandbox.appendChild(document.createElement("span"));
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));

            nativeSandbox.innerHTML = '';
        })
        // run sync
        .run();
    })();

    console.log("------------------------show/hide------------------------------");

    (function() {
        var nativeSandbox = document.getElementById("sandbox"),
            jqueryLink = $("#link"), 
            domLink = DOM.find("#link");

        new Benchmark.Suite()
        // add tests
        .add("jquery#hide()", function() {
            jqueryLink.hide();
        })
        .add("jquery#show()", function() {
            jqueryLink.show();
        })
        .add("DOM#hide()", function() {
            domLink.hide(); 
        })
        .add("DOM#show()", function() {
            domLink.show(); 
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));

            nativeSandbox.innerHTML = '<a id="link">t<a>';

            jqueryLink = $("#link");
            domLink = DOM.find("#link");
        })
        // run sync
        .run();
    })();

    console.log("------------------------foreach--------------------------------");

    (function() {
        var nativeSandbox = document.getElementById("sandbox"),
            jqueryElements = $("*"), 
            domElements = DOM.findAll("*"),
            i = 0, j = 0, k = 0;

        new Benchmark.Suite()
        // add tests
        .add("jquery#each", function() {
            jqueryElements.each(function() {
                ++i;
            });
        })
        .add("DOM#each()", function() {
            domElements.each(function() {
                ++k;
            });
        })
        // add listeners
        .on('cycle', function(event) {
            console.log(String(event.target));
        })
        // run sync
        .run();
    })();
    </script>
</body>
</html>